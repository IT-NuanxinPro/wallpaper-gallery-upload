// ============================================
// Element Plus 暗色主题覆盖
// 配合项目紫色渐变主题
// ============================================

@use './variables' as *;

// 暗色模式 CSS 变量覆盖
html.dark {
  // 主色 - 紫色
  --el-color-primary: #{$primary-start};
  --el-color-primary-light-3: #{lighten($primary-start, 10%)};
  --el-color-primary-light-5: #{lighten($primary-start, 20%)};
  --el-color-primary-light-7: #{lighten($primary-start, 30%)};
  --el-color-primary-light-8: #{lighten($primary-start, 35%)};
  --el-color-primary-light-9: #{lighten($primary-start, 40%)};
  --el-color-primary-dark-2: #{darken($primary-start, 10%)};

  // 成功色
  --el-color-success: #{$success};
  --el-color-success-light-3: #{lighten($success, 15%)};
  --el-color-success-light-5: #{lighten($success, 25%)};
  --el-color-success-light-7: #{lighten($success, 35%)};
  --el-color-success-light-8: #{lighten($success, 40%)};
  --el-color-success-light-9: #{lighten($success, 45%)};

  // 警告色
  --el-color-warning: #{$warning};
  --el-color-warning-light-3: #{lighten($warning, 15%)};
  --el-color-warning-light-5: #{lighten($warning, 25%)};
  --el-color-warning-light-7: #{lighten($warning, 35%)};
  --el-color-warning-light-8: #{lighten($warning, 40%)};
  --el-color-warning-light-9: #{lighten($warning, 45%)};

  // 危险色
  --el-color-danger: #{$danger};
  --el-color-danger-light-3: #{lighten($danger, 15%)};
  --el-color-danger-light-5: #{lighten($danger, 25%)};
  --el-color-danger-light-7: #{lighten($danger, 35%)};
  --el-color-danger-light-8: #{lighten($danger, 40%)};
  --el-color-danger-light-9: #{lighten($danger, 45%)};

  // 信息色
  --el-color-info: #{$gray-400};

  // 背景色 - 深色
  --el-bg-color: #{$gray-900};
  --el-bg-color-page: #{$gray-900};
  --el-bg-color-overlay: #{$gray-800};

  // 文字色
  --el-text-color-primary: #{$white};
  --el-text-color-regular: #{$gray-200};
  --el-text-color-secondary: #{$gray-400};
  --el-text-color-placeholder: #{$gray-500};
  --el-text-color-disabled: #{$gray-600};

  // 边框色
  --el-border-color: #{$gray-700};
  --el-border-color-light: #{$gray-700};
  --el-border-color-lighter: #{$gray-800};
  --el-border-color-extra-light: #{$gray-800};
  --el-border-color-dark: #{$gray-600};
  --el-border-color-darker: #{$gray-500};

  // 填充色
  --el-fill-color: #{$gray-800};
  --el-fill-color-light: #{$gray-800};
  --el-fill-color-lighter: #{$gray-900};
  --el-fill-color-extra-light: #{$gray-900};
  --el-fill-color-dark: #{$gray-700};
  --el-fill-color-darker: #{$gray-600};
  --el-fill-color-blank: #{$gray-900};

  // 遮罩
  --el-mask-color: rgba(0, 0, 0, 0.8);
  --el-mask-color-extra-light: rgba(0, 0, 0, 0.5);

  // 阴影
  --el-box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
  --el-box-shadow-light: 0 2px 8px rgba(0, 0, 0, 0.3);
  --el-box-shadow-lighter: 0 1px 4px rgba(0, 0, 0, 0.2);
  --el-box-shadow-dark: 0 8px 32px rgba(0, 0, 0, 0.5);
}

// ============================================
// 组件样式覆盖
// ============================================

// 按钮 - 圆角化设计
.el-button {
  border-radius: $radius-lg !important;
  transition: all $duration-normal $ease-out !important;
  font-weight: 500 !important;

  &:not(.is-text):not(.is-link):hover {
    transform: translateY(-2px);
  }

  &--primary {
    background: $primary-gradient !important;
    border: none !important;
    box-shadow: 0 4px 16px rgba($primary-start, 0.3);

    &:hover,
    &:focus {
      background: linear-gradient(
        135deg,
        lighten($primary-start, 5%) 0%,
        lighten($primary-end, 5%) 100%
      ) !important;
      box-shadow: 0 6px 20px rgba($primary-start, 0.4);
    }
  }

  &--success {
    box-shadow: 0 4px 12px rgba($success, 0.3);
    border-radius: $radius-lg !important;
  }

  &--warning {
    box-shadow: 0 4px 12px rgba($warning, 0.3);
    border-radius: $radius-lg !important;
  }

  &--danger {
    box-shadow: 0 4px 12px rgba($danger, 0.3);
    border-radius: $radius-lg !important;
  }

  &.is-plain {
    background: rgba(255, 255, 255, 0.05) !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;

    &.el-button--primary {
      color: $primary-start !important;
      border-color: rgba($primary-start, 0.5) !important;

      &:hover {
        background: rgba($primary-start, 0.1) !important;
        border-color: $primary-start !important;
      }
    }
  }

  &.is-round {
    border-radius: $radius-full !important;
  }
}

// 输入框 - 圆角化
.el-input {
  .el-input__wrapper {
    background: rgba(255, 255, 255, 0.05) !important;
    border-radius: $radius-lg !important;
    box-shadow: none !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    transition: all $duration-normal !important;

    &:hover {
      border-color: rgba(255, 255, 255, 0.25) !important;
    }

    &.is-focus {
      border-color: $primary-start !important;
      box-shadow: 0 0 0 3px rgba($primary-start, 0.2) !important;
    }
  }

  .el-input__inner {
    color: $white !important;

    &::placeholder {
      color: $gray-500 !important;
    }
  }
}

// 选择器 - 圆角化
.el-select {
  .el-select__wrapper {
    background: rgba(255, 255, 255, 0.05) !important;
    border-radius: $radius-lg !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    box-shadow: none !important;

    &:hover {
      border-color: rgba(255, 255, 255, 0.25) !important;
    }

    &.is-focused {
      border-color: $primary-start !important;
      box-shadow: 0 0 0 3px rgba($primary-start, 0.2) !important;
    }
  }

  .el-select__input {
    color: $white !important;
  }

  .el-select__placeholder {
    color: $gray-500 !important;
  }
}

// 下拉菜单 - 毛玻璃
.el-select-dropdown,
.el-dropdown-menu,
.el-popper {
  background: rgba(31, 41, 55, 0.95) !important;
  backdrop-filter: blur(20px) !important;
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
  border-radius: $radius-xl !important;
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4) !important;

  .el-select-dropdown__item,
  .el-dropdown-menu__item {
    color: $gray-200 !important;
    border-radius: $radius-md !important;
    margin: 4px 8px !important;

    &:hover,
    &.hover {
      background: rgba(255, 255, 255, 0.1) !important;
      color: $white !important;
    }

    &.is-selected,
    &.selected {
      background: rgba($primary-start, 0.15) !important;
      color: $primary-start !important;
      font-weight: 500;
    }
  }

  .el-popper__arrow::before {
    background: rgba(31, 41, 55, 0.95) !important;
    border-color: rgba(255, 255, 255, 0.15) !important;
  }
}

// 对话框 - 毛玻璃风格
.el-dialog {
  background: rgba(31, 41, 55, 0.95) !important;
  backdrop-filter: blur(20px) !important;
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
  border-radius: $radius-xl !important;
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5) !important;

  .el-dialog__header {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
    padding: $spacing-5 $spacing-6 !important;
  }

  .el-dialog__title {
    color: $white !important;
    font-weight: 600;
  }

  .el-dialog__body {
    color: $gray-200 !important;
    padding: $spacing-6 !important;
  }

  .el-dialog__footer {
    border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
    padding: $spacing-4 $spacing-6 !important;
  }

  .el-dialog__headerbtn {
    width: 32px !important;
    height: 32px !important;
    top: 16px !important;
    right: 16px !important;
    background: rgba(255, 255, 255, 0.1) !important;
    border-radius: $radius-md !important;

    .el-dialog__close {
      color: $gray-400 !important;

      &:hover {
        color: $white !important;
      }
    }
  }
}

// 消息框 - 毛玻璃风格
.el-message-box {
  background: rgba(31, 41, 55, 0.95) !important;
  backdrop-filter: blur(20px) !important;
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
  border-radius: $radius-xl !important;
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5) !important;

  .el-message-box__header {
    padding: $spacing-5 $spacing-6 $spacing-3 !important;
  }

  .el-message-box__title {
    color: $white !important;
    font-weight: 600 !important;
  }

  .el-message-box__content {
    color: $gray-300 !important;
    padding: $spacing-3 $spacing-6 !important;
  }

  .el-message-box__btns {
    padding: $spacing-4 $spacing-6 $spacing-5 !important;

    .el-button--primary {
      background: $primary-gradient !important;
      border: none !important;
      border-radius: $radius-lg !important;
    }

    .el-button:not(.el-button--primary) {
      background: rgba(255, 255, 255, 0.1) !important;
      border: 1px solid rgba(255, 255, 255, 0.2) !important;
      border-radius: $radius-lg !important;
      color: $gray-300 !important;

      &:hover {
        background: rgba(255, 255, 255, 0.15) !important;
        color: $white !important;
      }
    }
  }

  .el-message-box__headerbtn {
    width: 32px !important;
    height: 32px !important;
    top: 12px !important;
    right: 12px !important;
    background: rgba(255, 255, 255, 0.1) !important;
    border-radius: $radius-md !important;

    .el-message-box__close {
      color: $gray-400 !important;

      &:hover {
        color: $white !important;
      }
    }
  }
}

// 消息提示 - 毛玻璃风格
.el-message {
  background: rgba(31, 41, 55, 0.95) !important;
  backdrop-filter: blur(20px) !important;
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
  border-radius: $radius-lg !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4) !important;
  padding: $spacing-3 $spacing-5 !important;

  .el-message__content {
    color: $gray-200 !important;
  }

  &--success {
    background: rgba(16, 185, 129, 0.15) !important;
    border-color: rgba(16, 185, 129, 0.3) !important;

    .el-message__content {
      color: #34d399 !important;
    }
  }

  &--warning {
    background: rgba(245, 158, 11, 0.15) !important;
    border-color: rgba(245, 158, 11, 0.3) !important;

    .el-message__content {
      color: #fbbf24 !important;
    }
  }

  &--error {
    background: rgba(239, 68, 68, 0.15) !important;
    border-color: rgba(239, 68, 68, 0.3) !important;

    .el-message__content {
      color: #f87171 !important;
    }
  }

  &--info {
    background: rgba(59, 130, 246, 0.15) !important;
    border-color: rgba(59, 130, 246, 0.3) !important;

    .el-message__content {
      color: #60a5fa !important;
    }
  }
}

// 警告提示 - 圆角化
.el-alert {
  border-radius: $radius-xl !important;

  &--success {
    background: rgba($success, 0.1) !important;
    border: 1px solid rgba($success, 0.2) !important;

    .el-alert__title,
    .el-alert__description {
      color: #34d399 !important;
    }
  }

  &--warning {
    background: rgba($warning, 0.1) !important;
    border: 1px solid rgba($warning, 0.2) !important;

    .el-alert__title,
    .el-alert__description {
      color: #fbbf24 !important;
    }
  }

  &--error {
    background: rgba($danger, 0.1) !important;
    border: 1px solid rgba($danger, 0.2) !important;

    .el-alert__title,
    .el-alert__description {
      color: #f87171 !important;
    }
  }

  &--info {
    background: rgba($info, 0.1) !important;
    border: 1px solid rgba($info, 0.2) !important;

    .el-alert__title,
    .el-alert__description {
      color: #60a5fa !important;
    }
  }
}

// 进度条
.el-progress {
  .el-progress-bar__outer {
    background: $gray-700 !important;
    border-radius: $radius-full !important;
  }

  .el-progress-bar__inner {
    background: $primary-gradient !important;
    border-radius: $radius-full !important;
  }

  .el-progress__text {
    color: $gray-300 !important;
  }

  &--circle {
    .el-progress-circle__track {
      stroke: $gray-700 !important;
    }

    .el-progress-circle__path {
      stroke: $primary-start !important;
    }
  }
}

// 标签 - 圆角化
.el-tag {
  border-radius: $radius-md !important;

  &--primary {
    background: rgba($primary-start, 0.15) !important;
    border-color: rgba($primary-start, 0.3) !important;
    color: $primary-start !important;
  }

  &--success {
    background: rgba($success, 0.15) !important;
    border-color: rgba($success, 0.3) !important;
    color: #34d399 !important;
  }

  &--warning {
    background: rgba($warning, 0.15) !important;
    border-color: rgba($warning, 0.3) !important;
    color: #fbbf24 !important;
  }

  &--danger {
    background: rgba($danger, 0.15) !important;
    border-color: rgba($danger, 0.3) !important;
    color: #f87171 !important;
  }

  &--info {
    background: rgba($gray-400, 0.15) !important;
    border-color: rgba($gray-400, 0.3) !important;
    color: $gray-400 !important;
  }

  &.el-tag--dark {
    border: none !important;
  }
}

// 树形控件
.el-tree {
  background: transparent !important;
  color: $gray-200 !important;

  .el-tree-node__content {
    border-radius: $radius-sm !important;

    &:hover {
      background: $gray-700 !important;
    }
  }

  .el-tree-node.is-current > .el-tree-node__content {
    background: rgba($primary-start, 0.15) !important;
    color: $primary-start !important;
  }

  .el-tree-node__expand-icon {
    color: $gray-400 !important;
  }
}

// 表单
.el-form-item {
  .el-form-item__label {
    color: $gray-300 !important;
    font-weight: 500;
  }
}

// 单选框
.el-radio {
  .el-radio__input {
    .el-radio__inner {
      background: $gray-800 !important;
      border-color: $gray-600 !important;
    }
  }

  .el-radio__label {
    color: $gray-200 !important;
  }

  &.is-checked {
    .el-radio__input {
      .el-radio__inner {
        background: $primary-start !important;
        border-color: $primary-start !important;
      }
    }

    .el-radio__label {
      color: $primary-start !important;
    }
  }
}

// 复选框
.el-checkbox {
  .el-checkbox__input {
    .el-checkbox__inner {
      background: $gray-800 !important;
      border-color: $gray-600 !important;
    }
  }

  .el-checkbox__label {
    color: $gray-200 !important;
  }

  &.is-checked {
    .el-checkbox__input {
      .el-checkbox__inner {
        background: $primary-start !important;
        border-color: $primary-start !important;
      }
    }
  }
}

// 开关
.el-switch {
  .el-switch__core {
    background: $gray-600 !important;
    border-color: $gray-600 !important;
  }

  &.is-checked {
    .el-switch__core {
      background: $primary-start !important;
      border-color: $primary-start !important;
      box-shadow: 0 0 8px rgba($primary-start, 0.4);
    }
  }
}

// 加载
.el-loading-mask {
  background: rgba($gray-900, 0.9) !important;
}

.el-loading-spinner {
  .circular {
    .path {
      stroke: $primary-start !important;
    }
  }

  .el-loading-text {
    color: $gray-300 !important;
  }
}

// 空状态
.el-empty {
  .el-empty__description {
    color: $gray-400 !important;
  }
}

// 工具提示 - 圆角化
.el-tooltip__popper {
  background: rgba(31, 41, 55, 0.95) !important;
  backdrop-filter: blur(12px) !important;
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
  border-radius: $radius-lg !important;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4) !important;
  color: $gray-200 !important;
}

// 弹出框 - 毛玻璃
.el-popover {
  background: rgba(31, 41, 55, 0.95) !important;
  backdrop-filter: blur(20px) !important;
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
  border-radius: $radius-xl !important;
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4) !important;
}

// 抽屉 - 毛玻璃
.el-drawer {
  background: rgba(31, 41, 55, 0.95) !important;
  backdrop-filter: blur(20px) !important;

  .el-drawer__header {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
    color: $white !important;
  }

  .el-drawer__body {
    color: $gray-200 !important;
  }
}

// 卡片 - 毛玻璃圆角
.el-card {
  background: rgba(31, 41, 55, 0.8) !important;
  backdrop-filter: blur(20px) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  border-radius: $radius-xl !important;
}

// 遮罩层
.el-overlay {
  background: rgba(0, 0, 0, 0.7) !important;
}

// 分割线
.el-divider {
  border-color: $gray-700 !important;

  .el-divider__text {
    background: $gray-800 !important;
    color: $gray-400 !important;
  }
}

// 图标按钮
.el-icon {
  &.el-icon--close,
  &.el-icon--arrow-down,
  &.el-icon--arrow-up {
    color: $gray-400 !important;

    &:hover {
      color: $white !important;
    }
  }
}

// 通知 - 毛玻璃圆角
.el-notification {
  background: rgba(31, 41, 55, 0.95) !important;
  backdrop-filter: blur(20px) !important;
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
  border-radius: $radius-xl !important;
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4) !important;

  .el-notification__title {
    color: $white !important;
    font-weight: 600 !important;
  }

  .el-notification__content {
    color: $gray-300 !important;
  }

  .el-notification__closeBtn {
    color: $gray-400 !important;

    &:hover {
      color: $white !important;
    }
  }
}

// 表格
.el-table {
  background: transparent !important;

  &::before {
    background: $gray-700 !important;
  }

  tr {
    background: transparent !important;
  }

  th.el-table__cell {
    background: $gray-800 !important;
    color: $gray-300 !important;
    border-bottom: 1px solid $gray-700 !important;
  }

  td.el-table__cell {
    border-bottom: 1px solid $gray-700 !important;
    color: $gray-200 !important;
  }

  .el-table__row:hover > td.el-table__cell {
    background: $gray-700 !important;
  }
}

// 分页
.el-pagination {
  .el-pager li {
    background: $gray-800 !important;
    color: $gray-300 !important;

    &:hover {
      color: $primary-start !important;
    }

    &.is-active {
      background: $primary-start !important;
      color: $white !important;
    }
  }

  .btn-prev,
  .btn-next {
    background: $gray-800 !important;
    color: $gray-300 !important;
  }
}

// 上传 - 圆角化
.el-upload {
  &-dragger {
    background: rgba(255, 255, 255, 0.05) !important;
    border: 2px dashed rgba(255, 255, 255, 0.2) !important;
    border-radius: $radius-xl !important;
    transition: all $duration-normal !important;

    &:hover {
      border-color: $primary-start !important;
      background: rgba($primary-start, 0.05) !important;
    }
  }
}

// 图片预览
.el-image-viewer__wrapper {
  background: rgba(0, 0, 0, 0.9) !important;
}
